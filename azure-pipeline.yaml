trigger:
  branches:
    include:
      - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  node_version: '18.x'

stages:
  - stage: InstallAndTestBackend
    jobs:
      - job: BackendJob
        steps:
          - task: UseNode@1
            inputs:
              versionSpec: '$(node_version)'

          - script: |
              cd backend
              npm install
              npm run test || echo "No tests yet"
            displayName: 'Install and Test Backend'
